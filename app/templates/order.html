<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>طلب قطع غيار - Parts Hunter</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
<style>
  .tab-button {
    cursor: pointer;
    padding: 10px 15px;
    border: none;
    border-bottom: 3px solid transparent;
    background: none;
  }
  .tab-button.active {
    border-bottom: 3px solid #f90;
    font-weight: bold;
    color: #f90;
  }
  .form-section {
    display: none;
  }
  .form-section.active {
    display: block;
  }
</style>
</head>
<body class="bg-light text-end">

<div class="container mt-5">
  <div class="card p-4 shadow">
    <h3 class="text-center mb-4">طلب قطع غيار</h3>

    <!-- التبويبات -->
    <div class="d-flex justify-content-around mb-3">
      <button class="tab-button active" onclick="switchTab('car')">🚗 سيارة</button>
      <button class="tab-button" onclick="switchTab('truck')">🚚 شاحنة</button>
      <button class="tab-button" onclick="switchTab('bike')">🏍️ موتر</button>
      <button class="tab-button" onclick="switchTab('gen')">⚡ مولد</button>
      <button class="tab-button" onclick="switchTab('elec')">🔌 كهربائيات</button>
    </div>

    <form id="orderForm">
      <div class="mb-3"><input type="text" name="name" class="form-control" placeholder="الاسم" required /></div>
      <div class="mb-3"><input type="text" name="phone" class="form-control" placeholder="رقم الهاتف أو واتساب" required /></div>

      <!-- سيارات -->
      <div id="car" class="form-section active">
        <div class="mb-2">
          <label>براند المركبة:</label>
          <select name="car_brand" class="form-select" onchange="updateModels('car')">
            <option value="">اختر البراند</option>
          </select>
        </div>
        <div class="mb-2">
          <label>موديل المركبة:</label>
          <select name="car_model" class="form-select">
            <option value="">اختر الموديل</option>
          </select>
        </div>
        <div class="mb-2">
          <label>سنة الصنع:</label>
          <select name="car_year" class="form-select">
          </select>
        </div>
        <div class="mb-2">
          <label>نوع المحرك:</label><br />
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="car_engine_type" value="احتراق" checked onchange="toggleFuel(this.value, 'car')" />
            <label class="form-check-label">احتراق داخلي</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="car_engine_type" value="كهربائي" onchange="toggleFuel(this.value, 'car')" />
            <label class="form-check-label">كهربائي</label>
          </div>
        </div>
        <div class="mb-2" id="car_fuelField">
          <label>نوع الوقود:</label>
          <select name="car_fuel" class="form-select">
            <option>بنزين</option>
            <option>جازولين</option>
          </select>
        </div>
        <div class="mb-2">
          <input type="text" name="car_serial" class="form-control" placeholder="رقم الشاسيه (إن وجد)" />
        </div>
      </div>

      <!-- شاحنات -->
      <div id="truck" class="form-section">
        <div class="mb-2">
          <label>براند الشاحنة:</label>
          <select name="truck_brand" class="form-select" onchange="updateModels('truck')">
            <option value="">اختر البراند</option>
          </select>
        </div>
        <div class="mb-2">
          <label>موديل الشاحنة:</label>
          <select name="truck_model" class="form-select">
            <option value="">اختر الموديل</option>
          </select>
        </div>
        <div class="mb-2">
          <label>سنة الصنع:</label>
          <select name="truck_year" class="form-select">
          </select>
        </div>
        <div class="mb-2">
          <label>نوع المحرك:</label><br />
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="truck_engine_type" value="احتراق" checked onchange="toggleFuel(this.value, 'truck')" />
            <label class="form-check-label">احتراق داخلي</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="truck_engine_type" value="كهربائي" onchange="toggleFuel(this.value, 'truck')" />
            <label class="form-check-label">كهربائي</label>
          </div>
        </div>
        <div class="mb-2" id="truck_fuelField">
          <label>نوع الوقود:</label>
          <select name="truck_fuel" class="form-select">
            <option>ديزل</option>
            <option>بنزين</option>
          </select>
        </div>
        <div class="mb-2">
          <input type="text" name="truck_serial" class="form-control" placeholder="رقم الشاسيه (إن وجد)" />
        </div>
      </div>

      <!-- موتورات -->
      <div id="bike" class="form-section">
        <div class="mb-2">
          <label>براند الموتور:</label>
          <select name="bike_brand" class="form-select" onchange="updateModels('bike')">
            <option value="">اختر البراند</option>
          </select>
        </div>
        <div class="mb-2">
          <label>موديل الموتور:</label>
          <select name="bike_model" class="form-select">
            <option value="">اختر الموديل</option>
          </select>
        </div>
        <div class="mb-2">
          <label>سنة الصنع:</label>
          <select name="bike_year" class="form-select">
          </select>
        </div>
        <div class="mb-2">
          <label>نوع المحرك:</label><br />
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="bike_engine_type" value="احتراق" checked onchange="toggleFuel(this.value, 'bike')" />
            <label class="form-check-label">احتراق داخلي</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="bike_engine_type" value="كهربائي" onchange="toggleFuel(this.value, 'bike')" />
            <label class="form-check-label">كهربائي</label>
          </div>
        </div>
        <div class="mb-2" id="bike_fuelField">
          <label>نوع الوقود:</label>
          <select name="bike_fuel" class="form-select">
            <option>بنزين</option>
            <option>جازولين</option>
          </select>
        </div>
        <div class="mb-2">
          <input type="text" name="bike_serial" class="form-control" placeholder="رقم الشاسيه (إن وجد)" />
        </div>
      </div>

      <!-- مولد -->
      <div id="gen" class="form-section">
        <div class="mb-2">
          <label>نوع المولد:</label>
          <select class="form-select" name="gen_type">
            <option>بيركنز</option>
            <option>كاتربيلر</option>
            <option>كوبوتا</option>
            <option>يانمار</option>
            <option>هوندا</option>
            <option>ياماها</option>
            <option>أخرى</option>
          </select>
        </div>
        <div class="mb-2"><input type="text" name="gen_capacity" class="form-control" placeholder="السعة بالكيلو فولت" /></div>
        <div class="mb-2"><input type="text" name="gen_fuel" class="form-control" placeholder="نوع الوقود" /></div>
        <div class="mb-2"><input type="text" name="gen_serial" class="form-control" placeholder="السيريال نمبر (إن وجد)" /></div>
      </div>

      <!-- كهربائيات -->
      <div id="elec" class="form-section">
        <div class="mb-2">
          <label>نوع القطعة الكهربائية:</label>
          <select class="form-select" name="elec_type">
            <option>ثلاجة</option>
            <option>غسالة</option>
            <option>بوتوجاز</option>
            <option>مكيف</option>
            <option>مايكرويف</option>
            <option>أخرى</option>
          </select>
        </div>
        <div class="mb-2"><input type="text" name="elec_brand" class="form-control" placeholder="المواصفات أو البراند" /></div>
      </div>

      <div class="mb-3">
        <textarea name="description" class="form-control" rows="3" placeholder="وصف القطعة المطلوبة" required></textarea>
      </div>

      <div class="d-flex gap-3 justify-content-between">
        <button type="reset" class="btn btn-secondary">مسح</button>
        <button type="button" class="btn btn-success" onclick="sendToWhatsApp('971566672873')">إرسال</button>
      </div>
    </form>
  </div>
</div>

<script>
  // بيانات البراندات والموديلات لكل قسم
  const data = {
    car: {
      brands: {
        "تويوتا": ["كورولا", "كامري", "لاندكروزر", "هايلوكس"],
        "نيسان": ["باترول", "تيانا", "نافارا"],
        "هونداي": ["سوناتا", "أكسنت", "توسان"],
        "كيا": ["سبورتاج", "ريو", "سيراتو"],
        "فورد": ["رنجير", "إكسبلورر", "فيوجن"],
        "شيفروليه": ["ماليبو", "كامارو", "سلفادور"],
        "ميتسوبيشي": ["لانسر", "أوتلاندر", "باجيرو"],
        "أخرى": []
      }
    },
    truck: {
      brands: {
        "إيسوزو": ["NPR", "FVR", "Giga"],
        "هيونداي": ["HD65", "HD72", "HD78"],
        "مرسيدس": ["أكتروس", "أكسور", "أتغو"],
        "مان": ["TGS", "TGX", "TGM"],
        "فولفو": ["FM", "FH", "FL"],
        "سكانيّا": ["R-Series", "S-Series", "P-Series"],
        "أخرى": []
      }
    },
    bike: {
      brands: {
        "ياماها": ["YZF-R15", "MT-15", "FZ"],
        "هوندا": ["CBR150R", "CBR250R", "CRF"],
        "سوزوكي": ["GSX-R150", "GSX-S150", "V-Strom"],
        "كوازاكي": ["Ninja 250", "Z250", "Versys"],
        "أخرى": []
      }
    }
  };

  // توليد سنوات الصنع من 1960 إلى 2026
  const years = [];
  for(let y=1960; y<=2026; y++){
    years.push(y);
  }

  // تعبئة سنوات الصنع لكل قسم
  ["car_year", "truck_year", "bike_year"].forEach(name=>{
    const select = document.getElementsByName(name)[0];
    years.forEach(year=>{
      const opt = document.createElement("option");
      opt.value = year;
      opt.textContent = year;
      select.appendChild(opt);
    });
  });

  // تعبئة براندات لكل قسم
  ["car", "truck", "bike"].forEach(section=>{
    const brandSelect = document.getElementsByName(section + "_brand")[0];
    const brands = Object.keys(data[section].brands);
    brands.forEach(b=>{
      const opt = document.createElement("option");
      opt.value = b;
      opt.textContent = b;
      brandSelect.appendChild(opt);
    });
  });

  // تحديث موديلات بناءً على البراند المختار لكل قسم
  function updateModels(section){
    const brandSelect = document.getElementsByName(section + "_brand")[0];
    const modelSelect = document.getElementsByName(section + "_model")[0];
    const selectedBrand = brandSelect.value;

    // إزالة الموديلات القديمة
    modelSelect.innerHTML = '<option value="">اختر الموديل</option>';

    if(selectedBrand && data[section].brands[selectedBrand]){
      data[section].brands[selectedBrand].forEach(model=>{
        const opt = document.createElement("option");
        opt.value = model;
        opt.textContent = model;
        modelSelect.appendChild(opt);
      });
    }
  }

  // إظهار أو إخفاء حقل الوقود حسب نوع المحرك
  function toggleFuel(value, tab) {
    const fuelField = document.getElementById(tab + "_fuelField");
    if(fuelField){
      fuelField.style.display = (value === "احتراق") ? "block" : "none";
    }
  }

  // وظيفة الإرسال للواتساب
  function sendToWhatsApp(number){
    const form = document.getElementById('orderForm');
    const name = form.name.value;
    const phone = form.phone.value;
    const description = form.description.value;

    let message = `*طلب جديد من موقع Parts Hunter*%0A👤 الاسم: ${name}%0A📞 الهاتف: ${phone}%0A📝 تفاصيل القطعة: ${description}`;

    const sections = ["car", "truck", "bike", "gen", "elec"];
    let activeSection = null;
    for(const s of sections){
      if(document.getElementById(s).classList.contains("active")){
        activeSection = s;
        break;
      }
    }

    if(["car", "truck", "bike"].includes(activeSection)){
      const brand = form[activeSection + "_brand"].value;
      const model = form[activeSection + "_model"].value;
      const year = form[activeSection + "_year"].value;
      const engine = form[activeSection + "_engine_type"].value;
      const fuel = form[activeSection + "_fuel"]?.value || "";
      const serial = form[activeSection + "_serial"].value;

      message += `%0A🚗 البراند: ${brand}%0A🛠️ الموديل: ${model}%0A📆 سنة الصنع: ${year}`;
      message += `%0A🔧 نوع المحرك: ${engine}`;
      if(engine === "احتراق"){
        message += `%0A⛽ نوع الوقود: ${fuel}`;
      }
      message += `%0A🔢 رقم الشاسيه: ${serial}`;
    } else if(activeSection === "gen"){
      message += `%0A⚡ نوع المولد: ${form.gen_type.value}%0A⚙️ السعة: ${form.gen_capacity.value}%0A⛽ الوقود: ${form.gen_fuel.value}%0A🔢 السيريال: ${form.gen_serial.value}`;
    } else if(activeSection === "elec"){
      message += `%0A🔌 نوع الجهاز: ${form.elec_type.value}%0A🏷️ المواصفات: ${form.elec_brand.value}`;
    }

    window.open(`https://wa.me/${number}?text=${message}`, "_blank");
  }
</script>

</body>
</html>
